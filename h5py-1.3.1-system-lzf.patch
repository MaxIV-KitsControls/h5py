--- h5py-1.3.1.ORIG/lzf/lzf_filter.c	2011-05-22 22:20:02.488196039 +0200
+++ h5py-1.3.1.ORIG/lzf/lzf_filter.c	2011-05-22 23:09:49.235190001 +0200
@@ -26,7 +26,7 @@ 
 #include <stdio.h>
 #include <errno.h>
 #include "hdf5.h"
-#include "lzf/lzf.h"
+#include "lzf.h"
 #include "lzf_filter.h"
 
 /* Our own versions of H5Epush_sim, as it changed in 1.8 */
--- h5py-1.3.1.ORIG/setup.py	2011-05-22 22:20:02.487196131 +0200
+++ h5py-1.3.1.ORIG/setup.py	2011-05-22 23:10:46.158190215 +0200
@@ -167,7 +167,7 @@ 
         COMPILER_SETTINGS['library_dirs'] += [op.join(HDF5, 'dll')]
 else:
     COMPILER_SETTINGS = {
-       'libraries'      : ['hdf5'],
+       'libraries'      : ['hdf5','lzf'],
        'include_dirs'   : [numpy.get_include(), localpath('lzf')],
        'library_dirs'   : [],
        'define_macros'  : [('H5_USE_16_API', None)]
@@ -183,9 +183,7 @@ 
 MODULES = ['h5', 'h5e', 'h5f', 'h5g', 'h5s', 'h5t', 'h5d', 'h5a', 'h5p', 'h5z',
                  'h5i', 'h5r', 'h5fd', 'utils', 'h5o', 'h5l', '_conv', '_proxy']
 
-EXTRA_SRC = {'h5': [ localpath("lzf/lzf_filter.c"), 
-                     localpath("lzf/lzf/lzf_c.c"),
-                     localpath("lzf/lzf/lzf_d.c")]}
+EXTRA_SRC = {'h5': [ localpath("lzf/lzf_filter.c") ]}
 
 def make_extension(module):
     sources = [op.join('h5py', module+'.c')] + EXTRA_SRC.get(module, [])

